<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GIRAFFE: ImCalculator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="favicon.ico"/></td>
  <td id="projectalign">
   <div id="projectname">GIRAFFE
   </div>
   <div id="projectbrief">GIRAFFE - Geospatial Image Registration And reFErencing</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_im_calculator-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ImCalculator Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a679198a753de48d5a3850e1256c8d94e" id="r_a679198a753de48d5a3850e1256c8d94e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a679198a753de48d5a3850e1256c8d94e">init</a> (<a class="el" href="class_data_manager.html">DataManager</a> *_dataManager)</td></tr>
<tr class="memdesc:a679198a753de48d5a3850e1256c8d94e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the <a class="el" href="class_im_calculator.html">ImCalculator</a> with necessary parameters, including camera settings and directory setup.  <br /></td></tr>
<tr class="separator:a679198a753de48d5a3850e1256c8d94e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b0fe3ae72de03d46a5ddca7643b399e" id="r_a3b0fe3ae72de03d46a5ddca7643b399e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3b0fe3ae72de03d46a5ddca7643b399e">projectPoint</a> (<a class="el" href="class_laser_point.html">LaserPoint</a> *lp)</td></tr>
<tr class="memdesc:a3b0fe3ae72de03d46a5ddca7643b399e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Projects a 3D point onto the 2D image plane and updates mask and image data accordingly.  <br /></td></tr>
<tr class="separator:a3b0fe3ae72de03d46a5ddca7643b399e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cf23c39f46c312e1bde13f45e3076e5" id="r_a4cf23c39f46c312e1bde13f45e3076e5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4cf23c39f46c312e1bde13f45e3076e5">init_image</a> (<a class="el" href="class_bounding_box.html">BoundingBox</a> *b)</td></tr>
<tr class="memdesc:a4cf23c39f46c312e1bde13f45e3076e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the image with the given bounding box.  <br /></td></tr>
<tr class="separator:a4cf23c39f46c312e1bde13f45e3076e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72dbd78647602fcf07d21aecaa6ff197" id="r_a72dbd78647602fcf07d21aecaa6ff197"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a72dbd78647602fcf07d21aecaa6ff197">write_images</a> ()</td></tr>
<tr class="memdesc:a72dbd78647602fcf07d21aecaa6ff197"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates output images based on distance and filtering operations.  <br /></td></tr>
<tr class="separator:a72dbd78647602fcf07d21aecaa6ff197"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60a13c5de1fd2f168c5c05d519a59370" id="r_a60a13c5de1fd2f168c5c05d519a59370"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a60a13c5de1fd2f168c5c05d519a59370">save_images</a> ()</td></tr>
<tr class="memdesc:a60a13c5de1fd2f168c5c05d519a59370"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves all generated synthetic images, including distance maps and pyramids, in the <a class="el" href="class_im_calculator.html">ImCalculator</a> directory.  <br /></td></tr>
<tr class="separator:a60a13c5de1fd2f168c5c05d519a59370"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1329e53df5d5e3aafd7e4d060f8bd30" id="r_af1329e53df5d5e3aafd7e4d060f8bd30"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af1329e53df5d5e3aafd7e4d060f8bd30">fill_vectors</a> ()</td></tr>
<tr class="memdesc:af1329e53df5d5e3aafd7e4d060f8bd30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fills 2D, 3D, and color vectors with data from the coordinate image.  <br /></td></tr>
<tr class="separator:af1329e53df5d5e3aafd7e4d060f8bd30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e8fc2f5a0fd46e4476f4c786a0637fe" id="r_a2e8fc2f5a0fd46e4476f4c786a0637fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2e8fc2f5a0fd46e4476f4c786a0637fe">fill_image</a> (int radius_mask_fill=10)</td></tr>
<tr class="memdesc:a2e8fc2f5a0fd46e4476f4c786a0637fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fills masked regions in the input image with colors from provided synthetic points.  <br /></td></tr>
<tr class="separator:a2e8fc2f5a0fd46e4476f4c786a0637fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9d3c0113b0667f508344e6d8b47bc18" id="r_ac9d3c0113b0667f508344e6d8b47bc18"><td class="memItemLeft" align="right" valign="top"><a id="ac9d3c0113b0667f508344e6d8b47bc18" name="ac9d3c0113b0667f508344e6d8b47bc18"></a>
cv::Mat *&#160;</td><td class="memItemRight" valign="bottom"><b>get_image</b> ()</td></tr>
<tr class="separator:ac9d3c0113b0667f508344e6d8b47bc18"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2e8fc2f5a0fd46e4476f4c786a0637fe" name="a2e8fc2f5a0fd46e4476f4c786a0637fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e8fc2f5a0fd46e4476f4c786a0637fe">&#9670;&#160;</a></span>fill_image()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImCalculator::fill_image </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>radius_mask_fill</em></span><span class="paramdefsep"> = </span><span class="paramdefval">10</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fills masked regions in the input image with colors from provided synthetic points. </p>
<p>This function generates a mask based on non-white pixels in the image, fills specified points with corresponding colors, and interpolates colors to fill in remaining masked regions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">radius_mask_fill</td><td>The radius used for filling the mask around non-white areas. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af1329e53df5d5e3aafd7e4d060f8bd30" name="af1329e53df5d5e3aafd7e4d060f8bd30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1329e53df5d5e3aafd7e4d060f8bd30">&#9670;&#160;</a></span>fill_vectors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImCalculator::fill_vectors </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fills 2D, 3D, and color vectors with data from the coordinate image. </p>
<p>This function retrieves synthetic 2D coordinates, 3D coordinates, and RGB colors from a coordinate image managed by the data manager. It checks that each vector has been initialized before use, clears any existing data, and then populates the vectors with new data from the coordinate image. </p>

</div>
</div>
<a id="a679198a753de48d5a3850e1256c8d94e" name="a679198a753de48d5a3850e1256c8d94e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a679198a753de48d5a3850e1256c8d94e">&#9670;&#160;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImCalculator::init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_data_manager.html">DataManager</a> *</td>          <td class="paramname"><span class="paramname"><em>_dataManager</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the <a class="el" href="class_im_calculator.html">ImCalculator</a> with necessary parameters, including camera settings and directory setup. </p>
<p>This function sets up the <a class="el" href="class_im_calculator.html">ImCalculator</a> by initializing the log file, setting up distance limits, reserving space for pyramid masks, and configuring camera settings based on data from the provided <a class="el" href="class_data_manager.html">DataManager</a>. It also ensures that the output directory exists.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_dataManager</td><td>Pointer to the <a class="el" href="class_data_manager.html">DataManager</a> providing required parameters and file paths. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4cf23c39f46c312e1bde13f45e3076e5" name="a4cf23c39f46c312e1bde13f45e3076e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cf23c39f46c312e1bde13f45e3076e5">&#9670;&#160;</a></span>init_image()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImCalculator::init_image </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_bounding_box.html">BoundingBox</a> *</td>          <td class="paramname"><span class="paramname"><em>b</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the image with the given bounding box. </p>
<p>This function calculates the image plane based on the bounding box and pixel size, then initializes the images (e.g., <code>_image</code>, <code>_mask</code>, <code>_distImage</code>, pyramids) with the calculated columns and rows.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td>The bounding box containing the minimum and maximum values for x, y, and z. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3b0fe3ae72de03d46a5ddca7643b399e" name="a3b0fe3ae72de03d46a5ddca7643b399e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b0fe3ae72de03d46a5ddca7643b399e">&#9670;&#160;</a></span>projectPoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImCalculator::projectPoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_laser_point.html">LaserPoint</a> *</td>          <td class="paramname"><span class="paramname"><em>lp</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Projects a 3D point onto the 2D image plane and updates mask and image data accordingly. </p>
<p>This function transforms a given 3D point from world coordinates into camera space, projects it onto the 2D image plane, and updates the pixel values and depth mask if the point is closer than any existing value at that pixel. Pyramid masks at lower resolutions are also updated to enable multi-scale processing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lp</td><td>Pointer to the <a class="el" href="class_laser_point.html" title="Represents a 3D point with associated ID and color.">LaserPoint</a> object containing the 3D coordinates and color information. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a60a13c5de1fd2f168c5c05d519a59370" name="a60a13c5de1fd2f168c5c05d519a59370"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60a13c5de1fd2f168c5c05d519a59370">&#9670;&#160;</a></span>save_images()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImCalculator::save_images </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saves all generated synthetic images, including distance maps and pyramids, in the <a class="el" href="class_im_calculator.html">ImCalculator</a> directory. </p>
<p>This function handles the saving of synthetic images created during processing. It first releases and reinitializes the mask, writes the distance images and their pyramid levels to files, and saves the synthetic color image if available. If the image is in grayscale, it converts intensity values to an 8-bit format for storage.</p>
<ul>
<li>Saves the distance image (<code>dist_image.png</code>) and distance pyramids (<code>dist_image_pX.png</code> for each level).</li>
<li>Saves the color or grayscale synthetic image in the directory as specified by <code>_working_dir_imcalculator</code>.</li>
<li>Logs each save operation and includes a check for whether the image is color or grayscale. </li>
</ul>

</div>
</div>
<a id="a72dbd78647602fcf07d21aecaa6ff197" name="a72dbd78647602fcf07d21aecaa6ff197"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72dbd78647602fcf07d21aecaa6ff197">&#9670;&#160;</a></span>write_images()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImCalculator::write_images </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates output images based on distance and filtering operations. </p>
<p>This function calculates and saves the original distance image, applies filtering to remove overlapping background pixels, and recalculates both the distance image and distance pyramids.</p>
<dl class="section warning"><dt>Warning</dt><dd>Call this function only after all points have been projected. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/<a class="el" href="_im_calculator_8hpp_source.html">ImCalculator.hpp</a></li>
<li>src/<b>ImCalculator.cpp</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
